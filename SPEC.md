# 📜 感情熱力学モデル (ETCM) — 簡易仕様書（最終清書版）

**プロジェクト名**：感情球体 3D 可視化システム（時間心理力学）  
**フレームワーク**：HTML + JavaScript + Three.js r168+  
**最終更新**：2025年12月11日（脳波判定・固体粘性視覚化統合完了）

## 1. 概要

本システムは、感情を「非平衡・開放情報熱力学系」として物理的に再定義し、内部オーラ（19粒子）＋外部オーラ（L6場）の動的相互作用をリアルタイム3Dシミュレーションで可視化する学術的ツールです。

- 内部オーラ：6層19粒子の球体構造（中心核1＋L0～L5層18粒子）
- 外部オーラ：背景に広がる光体／場（L6）＋パーティクルクラウド

基本操作  
- マウスドラッグ：カメラ回転  
- ホイール：ズーム  
- 右下パネル：UI開閉

## 2. 層構造と物性相（最新整合版）

| 層          | 次元 n | 名称           | 物性相            | 役割・物理的特徴                              |
|-------------|--------|----------------|-------------------|-----------------------------------------------|
| 中心核      | -      | 光源 (Core)    | 量子流体 (BEC)    | 情熱エネルギーの特異点・超流動性              |
| L0          | 3      | 核層           | Light／超流動体   | 根源的意志（悩・怒・好）・低エントロピー源    |
| L1          | 4      | 身体層         | 気体              | 本能・熱対流・天気（哀・激・楽）                          |
| L2          | 5      | 思考層         | 液体（粘弾性体）  | 認知・潮汐駆動（嫌・活・融）                              |
| L3          | 6      | 文明層         | 固体              | 信念・社会的基盤（圧・喜・笑）                              |
| L4          | 7      | 外部接合層     | 液体（粘弾性体）  | 他者との緩衝ゾーン（調・変・静）                            |
| L5          | 8      | 外部雰囲気層   | 気体              | 場の空気・集合心理・L6との境界（観・響・隔）                |
| L6          | -      | 外部オーラ     | 光体／場          | 負のエントロピー源・非平衡駆動源・他者・推し    |

合計粒子数：19（中心核1＋各層3×6＝19）

## 3. 核心数理（完全版）

| 変数                  | 厳密定義                                                                 | 役割・備考                                                                 |
|-----------------------|--------------------------------------------------------------------------|----------------------------------------------------------------------------|
| 総ポテンシャル \( S_n \) | \( S_n = S_{n-1} + \Delta S_n \)                                        | 層ごとの累積エネルギー（連鎖構造）                                         |
| 動的安定定数 \( \pi_n \) | \( \pi_n = \frac{22 S_n + 3b}{7 S_n + b} \)                              | 動的円周率（3.136363…～3.142857…）                                         |
| n次元球体体積 \( V_n \)  | $$ V_n = \frac{\pi_n^{n/2}}{\Gamma\left(\frac{n}{2} + 1\right)} $$     | 感情宇宙の物理的体積。\( \pi_n \)変動により実効体積が膨張・収縮             |
| 情報密度 \( \rho_n \)    | \( \rho_n = \frac{V_n}{n^2} \)                                           | 創発重力 \( G_{\text{eff}} \propto \rho_n \) の直接的源                     |
| 幾何学的影響因子 \( \Gamma_n \) | \( \Gamma_n = \ln(1 + \rho_n) \)                                  | 全物理・視覚効果のマスター制御変数                                         |
| 創発重力定数 \( G_{\text{eff}} \) | \( G_{\text{eff}} = G_0 \cdot \Gamma_{\text{avg}} \)               | 情報密度から創発する動的重力                                               |

## 4. 物理法則と運動方程式

すべての粒子は以下の統合運動方程式に従う：

\[
m_{\text{eff}} \frac{d^2\mathbf{r}}{dt^2} = \mathbf{F}_{\text{Gravity}} + \mathbf{F}_{\text{Repulsion}} + \mathbf{F}_{\text{Drive}} + \mathbf{F}_{\text{Drag}}
\]

| 力                    | 定義式                                                                                       | 役割                                      |
|-----------------------|----------------------------------------------------------------------------------------------|-------------------------------------------|
| 創発重力              | \( \mathbf{F}_{\text{Gravity}} = -G_{\text{eff}} M_{\text{Core}} \frac{m_{\text{eff}}}{r^2} \mathbf{e}_r \) | 中心核への引力                            |
| 斥力（熱圧代理）      | \( \mathbf{F}_{\text{Repulsion}} = K_R \Gamma_n \frac{m_{\text{eff}}}{r} \mathbf{e}_r \)       | 外向きの情報斥力                          |
| 駆動力                | 気体層：熱対流浮力　／　液体層：潮汐力                                                      | 秩序だったエネルギー注入                  |
| 粘性散逸力            | \( \mathbf{F}_{\text{Drag}} = -\eta_n \mathbf{v} \)                                          | 不可逆的エントロピー生成。\( \eta_n \)は後述 |

### 粘性係数 \( \eta_n \) の動的定義

| 物性相       | 粘性係数 \( \eta_n \) の式                                      | 特徴                                   |
|--------------|------------------------------------------------------------------|----------------------------------------|
| 気体 (L1/L5) | \( \eta_n = K_G \rho_n T^{-1} \)                                 | 温度が高いほど流動性が増す             |
| 液体 (L2/L4) | \( \eta_n = K_L \rho_n (1 + \bar{\sigma}_n)^{-1} \)              | チクソトロピー（応力で粘性低下）       |
| 固体 (L3)    | \( \eta_n = K_S \rho_n \)（極めて高値）                          | ほぼ固定だが、地殻変動や地震のような局所的・非線形動的変動を許容。視覚的に微小振動やクラック発生を表現し、外部熱・応力の内部流入を可能に（完全静止状態では流入が阻害されるため、微動をデフォルト化） |

### 恒常性維持機構

1. L6 → L5 境界での外部入力変調（遮蔽／共鳴）
2. L0核層の非線形点火（熱的死からの蘇生）  
   \( T_{\text{L5}} > T_{\text{Crit}} \;\Rightarrow\; W_{\text{Drive}} \propto \exp[K_{NL}(T_{\text{L5}} - T_{\text{Crit}})] \)
3. 光源温度の負帰還自己調節  
   \( T_{\text{Source}} = T_{\text{Base}} + K_T (S_{\text{Target}} - S_{\text{Total}}) \)

## 5. UI・観測指標（リアルタイム表示）

| 指標名                  | 計算方法                                            | 表示例                     |
|-------------------------|-----------------------------------------------------|----------------------------|
| 平均 \( \pi_n \)        | 全層の \( \pi_n \) 加重平均                         | 3.141238                   |
| 実効体積 \( V_{\text{Total}} \) | \( \sum V_n \) または加重総和                | 1.84e+12                   |
| 支配的感情名            | 現在 T が最大の粒子名＋修飾語（季節・天気）         | 「激（冬・怒）」           |
| 脳波／季節／天気        | L5層の T, σ, dT/dt から統一ロジック                 | α波・冬・喜              |
| 層半径変動              | \( R_n \propto V_n^{1/n} \cdot f(m_{\text{eff}}) \) | 視覚的に膨張・収縮         |

### 脳波・天気・季節の詳細判定条件

システム全体の感情状態を脳波（β/α/θ/δ波）・天気（喜怒哀楽）・季節（春夏秋冬）で統一的に表現。判定はL5層の平均物理変数（T, σ, dT/dt）に基づき、全体的平均値で決定。粒子通過による局所的な天気変動は発生するが、全体天気は平均値優先。

| 脳波 | 天気/季節 | 判定条件（全体平均値基準） |
|------|-----------|----------------------------|
| β波 | 怒/夏    | 興奮した状態（高T・高σ・急変動dT/dt） |
| α波 | 喜/春    | 活動的な意識（中T・中σ・安定変動） |
| θ波 | 楽/秋    | 内省的な快適さ（低中T・低σ・緩やか変動） |
| δ波 | 哀/冬    | 深い休息/散逸（低T・低σ・微変動または停滞） |

- 天気は喜怒哀楽で簡易的に表現（例: 喜=晴れ、怒=嵐、哀=雨、楽=曇り）。視覚的に粒子軌道やクラウドエフェクトで反映。

## 6. 入力プロトコル（TOON形式）

index.html のテキストエリアに貼り付けるだけで即反映。
感情の時間変化をパラメータ値として貼り付ける
外部オーラの天気を簡易ボタンにて入力（喜怒哀楽無）

## 7. 起動方法

```bash
# ローカルサーバーで起動（推奨）
npx serve .
# または
python -m http.server 8000
```

→ http://localhost:8000 にアクセス

以上により、ETCMは感情を真に物理現象として扱う、世界で唯一の動的シミュレータとして完成しました。